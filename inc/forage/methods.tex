\section{Methods}
\subsection{Advantages of using a relational database}
\pname~uses a MySQL database management system (DBMS) for fast and efficient
sequence data storage and retrieval. The introduction of a database has a
number of advantages over file-based sequence storage:

\begin{description}
	\item[Memory efficiency.] The sequence data does not need to be loaded into
		RAM for fast access since the DBMS manages sequence storage and retrieval.
		This becomes especially important when analyzing data files larger than the
		computer's physical memory.
	\item[No redundancy.] Every sequence and each orthology assignment is stored
		in the database exactly once with a unique identifier. 
	\item[Speed.] The DBMS is highly optimized for speed and efficiency. %TODO MySQL performance
	\item[Flexibility.] SQL queries allow custom-tailored filtering and output.
\end{description}

\subsection{Checksums guarantee uniqueness}
As outlined on page \pageref{uniq}, unique sequence IDs are necessary in
order for \code{hmmsearch} not to create confusion by treating whitespace in
sequence headers as a description separator. To avoid this, and to maintain a
consistent naming scheme across applications, \pname~uses a SHA1 checksum to
generate a unique ID for every sequence. The checksum is generated from both the
original header and the sequence. Sequences are loaded into the database along
with these checksums. During the analysis, wherever a file is generated that
includes sequence identifiers, this checksum is used. This also eliminates the
problem with \code{fastatranslate} introducing whitespace that confuses
\code{hmmsearch}.

It must be guaranteed that no two checksums, i.e., two sequence identifiers, are
ever the same. The SHA1 hashing algorithm generates a checksum that is 160 bits,
or 40 hexadecimal characters in length. The probability $p$ of a hash collision
(i.e., two hashed elements returning the same checksum) in $n$ elements is

\begin{equation}
p \ge \frac{n (n-1)}{2} \times \frac{1}{2^b}
\label{eq:hashcollision}
\end{equation}

where $b$ is the number of bits generated by the hash function. There need to be
more than $1.7 \times 10^{15}$ objects for the SHA1 hashes to exceed a collision
probability of $10^{-18}$. Since the (original header + sequence) space is
expected to contain only a number of objects in the range of $10^6$ to
$10^{12}$, it is statistically safe to assume that every checksum is unique. 
